#!/bin/bash

ROOM=3880584

TOKEN=kAC2lD6a5cGAy9l528kI3533XrQLExzoe7Nxt2ka


#declare -A QAINT_ARRAY
#declare -A QAB_ARRAY
#declare -A QAC_ARRAY
#declare -A QAD_ARRAY
#declare -A STG_ARRAY
declare -A MAIN_ARRAY


MAIN_ARRAY=(["AMS-QA"]="https://amservicesqa-api.dev-prsn.com/health" ["LAS-QA"]="https://las-ilp-qa.dev-openclass.com" ["LAP-QA"]="https://learningassets-ilp-qa.dev-openclass.com" ["AssignmentContents-QA"]="https://assignmentcontents-qa.dev-openclass.com/healthcheck" ["GH-QA"]="https://ilpui-qa.dev-openclass.com" ["ItemRepo-QA"]="https://itemrepo-qa.dev-openclass.com/healthcheck" ["MxlAdmin-QA"]="https://mxladmin-qa.dev-openclass.com/healthcheck" ["MxlProcessor-QA"]="https://mxlprocessor-qa.dev-openclass.com/healthcheck" ["ScoringEngine-QA"]="https://scoringengine-qa.dev-openclass.com/healthcheck" ["Settings-QA"]="https://settings-qa.dev-openclass.com/healthcheck" ["GBCalcs-QA"]="https://gbcalculationsconvergence-qa.dev-prsn.com/health" ["GBComposite-QA"]="https://qagbcomposite-api.dev-prsn.com/health" ["GBServices-QA"]="https://gbservicesconvergence-qa.dev-prsn.com/health" ["AMS-QAB"]="https://amservicesqb-api.dev-prsn.com/health" ["LAS-QAB"]="https://las-ilp-qab.dev-openclass.com" ["LAP-QAB"]="https://learningassets-ilp-qab.dev-openclass.com" ["AssignmentContents-QAB"]="https://assignmentcontents-qab.dev-openclass.com/healthcheck" ["GH-QAB"]="https://ilpui-qab.dev-openclass.com" ["ItemRepo-QAB"]="https://itemrepo-qab.dev-openclass.com/healthcheck" ["MxlAdmin-QAB"]="https://mxladmin-qab.dev-openclass.com/healthcheck" ["MxlProcessor-QAB"]="https://mxlprocessor-qab.dev-openclass.com/healthcheck" ["ScoringEngine-QAB"]="https://scoringengine-qab.dev-openclass.com/healthcheck" ["Settings-QAB"]="https://settings-qab.dev-openclass.com/healthcheck" ["GBCalcs-QAB"]="https://gbcalculationsconvergence-qab.dev-prsn.com/health" ["GBComposite-QAB"]="https://qabgbcomposite-api.dev-prsn.com/health" ["GBServices-QAB"]="https://gbservicesconvergence-qab.dev-prsn.com/health" ["AMS-QAC"]="https://amservicesqc-api.dev-prsn.com/health" ["LAS-QAC"]="https://las-ilp-qac.dev-openclass.com" ["LAP-QAC"]="https://learningassets-ilp-qac.dev-openclass.com" ["AssignmentContents-QAC"]="https://assignmentcontents-qac.dev-openclass.com/healthcheck" ["GH-QAC"]="https://ilpui-qac.dev-openclass.com" ["ItemRepo-QAC"]="https://itemrepo-qac.dev-openclass.com/healthcheck" ["MxlAdmin-QAC"]="https://mxladmin-qac.dev-openclass.com/healthcheck" ["MxlProcessor-QAC"]="https://mxlprocessor-qac.dev-openclass.com/healthcheck" ["ScoringEngine-QAC"]="https://scoringengine-qac.dev-openclass.com/healthcheck" ["Settings-QAC"]="https://settings-qac.dev-openclass.com/healthcheck" ["GBCalcs-QAC"]="https://gbcalculationsconvergence-qac.dev-prsn.com/health" ["GBComposite-QAC"]="https://qacgbcomposite-api.dev-prsn.com/health" ["GBServices-QAC"]="https://gbservicesconvergence-qac.dev-prsn.com/health" ["AMS-QAD"]="https://amservicesqd-api.dev-prsn.com/health" ["LAS-QAD"]="https://las-ilp-qad.dev-openclass.com" ["AssignmentContents-QAD"]="https://assignmentcontents-qad.dev-openclass.com/healthcheck" ["GH-QAD"]="https://ilpui-qad.dev-openclass.com" ["ItemRepo-QAD"]="https://itemrepo-qad.dev-openclass.com/healthcheck" ["MxlAdmin-QAD"]="https://mxladmin-qad.dev-openclass.com/healthcheck" ["MxlProcessor-QAD"]="https://mxlprocessor-qad.dev-openclass.com/healthcheck" ["ScoringEngine-QAD"]="https://scoringengine-qad.dev-openclass.com/healthcheck" ["Settings-QAD"]="https://settings-qad.dev-openclass.com/healthcheck" ["GBCalcs-QAD"]="https://gbcalculationsconvergence-qad.dev-prsn.com/health" ["GBComposite-QAD"]="https://qadgbcomposite-api.dev-prsn.com/health" ["GBServices-QAD"]="https://gbservicesconvergence-qad.dev-prsn.com/health" ["AMS-STG"]="https://amservices-api.stg-prsn.com/health" ["LAS-STG"]="https://las-ilp-stg.stg-openclass.com" ["AssignmentContents-STG"]="https://assignmentcontents-cert.stg-openclass.com/healthcheck" ["GH-STG"]="https://ilpui-cert.stg-openclass.com" ["ItemRepo-STG"]="https://itemrepo-cert.stg-openclass.com/healthcheck" ["MxlAdmin-STG"]="https://mxladmin-cert.stg-openclass.com/healthcheck" ["MxlProcesor-STG"]="https://mxlprocessor-cert.stg-openclass.com/healthcheck" ["ScoringEngine-STG"]="https://scoringengine-cert.stg-openclass.com/healthcheck" ["Settings-STG"]="https://settings-cert.stg-openclass.com/healthcheck" ["GBCalcs-STG"]="https://gbcalculationsconvergence-cert.stg-prsn.com/health" ["GBComposite-STG"]="https://gbcomposite-api.stg-prsn.com/health" ["GBServices-STG"]="https://gbservicesconvergence-cert.stg-prsn.com/health" ["AMS-STGB"]="https://amservicesb-api.stg-prsn.com/health" ["LAS-STGB"]="https://las-ilp-stgb.stg-openclass.com" ["AssignmentContents-STGB"]="https://assignmentcontents-stgb.stg-openclass.com/healthcheck" ["GH-STGB"]="https://ilpui-stgb.stg-openclass.com" ["ItemRepo-STGB"]="https://itemrepo-stgb.stg-openclass.com/healthcheck" ["MxlAdmin-STGB"]="https://mxladmin-stgb.stg-openclass.com/healthcheck" ["MxlProcessor-STGB"]="https://mxlprocessor-stgb.stg-openclass.com/healthcheck" ["ScoringEngine-STGB"]="https://scoringengine-stgb.stg-openclass.com/healthcheck" ["Settings-STGB"]="https://settings-stgb.stg-openclass.com/healthcheck" ["GBCalcs-STGB"]="https://gbcalculationsconvergence-stgb.stg-prsn.com/health" ["GBComposite-STGB"]="https://stgbgbcomposite-api.stg-prsn.com/health" ["GBServices-STGB"]="https://gbservicesconvergence-stgb.stg-prsn.com/health" ["AMS-STGC"]="https://amservicesc-api.stg-prsn.com/health" ["LAS-STGC"]="https://las-ilp-stgc.stg-openclass.com" ["AssignmentContents-STGC"]="https://assignmentcontents-stgc.stg-openclass.com/healthcheck" ["GH-STGC"]="https://ilpui-stgc.stg-openclass.com" ["ItemRepo-STGC"]="https://itemrepo-stgc.stg-openclass.com/healthcheck" ["MxlAdmin-STGC"]="https://mxladmin-stgc.stg-openclass.com/healthcheck" ["MxlProcessor-STGC"]="https://mxlprocessor-stgc.stg-openclass.com/healthcheck" ["ScoringEngine-STGC"]="https://scoringengine-stgc.stg-openclass.com/healthcheck" ["Settings-STGC"]="https://settings-stgc.stg-openclass.com/healthcheck" ["GBCalcs-STGC"]="https://gbcalculationsconvergence-stgc.stg-prsn.com/health" ["GBComposite-STGC"]="https://stgcgbcomposite-api.stg-prsn.com/health" ["GBServices-STGC"]="https://gbservicesconvergence-stgc.stg-prsn.com/health" ["AMS-STGD"]="https://amservicesd-api.stg-prsn.com/health" ["LAS-STGD"]="https://las-ilp-stgd.stg-openclass.com" ["AssignmentContents-STGD"]="https://assignmentcontents-stgd.stg-openclass.com/healthcheck" ["GH-STGD"]="https://ilpui-stgd.stg-openclass.com" ["ItemRepo-STGD"]="https://itemrepo-stgd.stg-openclass.com/healthcheck" ["MxlAdmin-STGD"]="https://mxladmin-stgd.stg-openclass.com/healthcheck" ["MxlProcessor-STGD"]="https://mxlprocessor-stgd.stg-openclass.com/healthcheck" ["ScoringEngine-STGD"]="https://scoringengine-stgd.stg-openclass.com/healthcheck" ["Settings-STGD"]="https://settings-stgd.stg-openclass.com/healthcheck" ["GBCalcs-STGD"]="https://gbcalculationsconvergence-stgd.stg-prsn.com/health" ["GBComposite-STGD"]="https://stgdgbcomposite-api.stg-prsn.com/health" ["GBServices-STGD"]="https://gbservicesconvergence-stgd.stg-prsn.com/health")



#MAIN_ARRAY=(${!QAINT_ARRAY[@]} ${QAB_ARRAY[@]} ${QAC_ARRAY[@]} ${QAD_ARRAY[@]} ${STG_ARRAY[@]} ${STGB_ARRAY[@]}) 

	
#Notification()
#{
		#MAIN_ARRAY=("${@}")
		for i in "${!MAIN_ARRAY[@]}"
		do
#		echo $i, ${MAIN_ARRAY[${i}]}
		statuscode=`curl -o /dev/null --silent --head --write-out '%{http_code}\n' -X GET ${MAIN_ARRAY[${i}]}`
		#echo $statuscode
		if [ $statuscode -ne "200" ]; then
		curl -H "Content-Type: application/json" -X POST -d "{\"color\": \"red\", \"message_format\": \"text\", \"message\": \""$i" ( "${MAIN_ARRAY[${i}]}" ) is down\"}" https://api.hipchat.com/v2/room/$ROOM/notification?auth_token=$TOKEN
		fi
		done 
#}

#Notification "${QAINT_ARRAY[@]}"

